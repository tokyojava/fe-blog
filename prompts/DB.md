# üóÑ Database Design Document (DB)

## 1. Database Overview

**Database Type:** MongoDB  
**Design Principles:**  
- The database design follows the characteristics of document-oriented databases, minimizing relational queries and using nested structures to store related data.
- Field names follow the naming convention of lowercase with underscores.

---

## 2. Table Design

### 1Ô∏è‚É£ User Table (`users`)

| Field Name      | Type       | Description                                   |
| --------------- | ---------- | --------------------------------------------- |
| `_id`           | ObjectId   | Unique identifier for the user (auto-generated by MongoDB) |
| `email`         | String     | Email for login                              |
| `password`      | String     | Password for email login                     |
| `username`      | String     | Username on third-party platforms or for email login |
| `auth_type`     | String     | Login method (e.g., GitHub or email)         |
| `third_party_id`| String     | Third-party login ID, such as the ID on GitHub |
| `created_at`    | Date       | User creation time                           |
| `updated_at`    | Date       | Last update time for user information        |

---

### 2Ô∏è‚É£ Article Table (`posts`)

| Field Name      | Type       | Description                                   |
| --------------- | ---------- | --------------------------------------------- |
| `_id`           | ObjectId   | Unique identifier for the article (auto-generated by MongoDB) |
| `title`         | String     | Article title                                |
| `content`       | [String]   | Article content (in Markdown format). The frontend may create multiple Markdown blocks, so an array is used |
| `summary`       | String     | AI-generated summary of the article          |
| `category`          | [String]   | Category  |
| `tags`          | [String]   | Article tags (AI-generated or user-defined)  |
| `type`          | String     | Article type (`blog` for public or `diary` for private) |
| `author_id`     | ObjectId   | Author ID (linked to the `users` table)      |
| `created_at`    | Date       | Article creation time                        |
| `updated_at`    | Date       | Last update time for the article             |

---

### 3Ô∏è‚É£ Analytics Table (`analytics`)

| Field Name      | Type       | Description                                   |
| --------------- | ---------- | --------------------------------------------- |
| `_id`           | ObjectId   | Unique identifier for the analytics record (auto-generated by MongoDB) |
| `post_id`       | ObjectId   | Article ID (linked to the `posts` table)     |
| `views`         | Number     | Number of views for the article              |
| `created_at`    | Date       | Analytics record creation time               |
| `updated_at`    | Date       | Last update time for the analytics record    |

---

## 3. Field Descriptions

1. **User Table (`users`)**
   - The `auth_type` field is used to distinguish the login method, such as `github` or `email`.

2. **Article Table (`posts`)**
   - The `summary` and `tags` fields are automatically generated by AI, but users can manually modify them.
   - The `type` field distinguishes article types: `blog` for public blogs and `diary` for private diaries.

3. **Analytics Table (`analytics`)**
   - The number of views for each article is stored separately, allowing for future expansion of analytics features.

---

## 4. Index Design

1. **Article Table**
   - Create an index on the `author_id` field to facilitate querying all articles by a specific user.
   - Create an index on the `tags` field to facilitate searching and categorization.

2. **Analytics Table**
   - Create an index on the `post_id` field to quickly query the analytics for a specific article.

---

## 5. Data Relationships

- **User Table (`users`)** and **Article Table (`posts`)**: One-to-many relationship.
- **Article Table (`posts`)** and **Analytics Table (`analytics`)**: One-to-one relationship.
